webpackJsonp([46],{ToN7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("hLkT"),r=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);var l=i("b0Pi");var s=function(e){i("sAeX")},n=i("VU/8")(r.a,l.a,!1,s,null,null);t.default=n.exports},b0Pi:function(e,t,i){"use strict";var o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"container form02"},[i("el-form",{ref:"form02",staticClass:"demo-form-inline",attrs:{"label-position":e.labelPosition,rules:e.rules,"label-width":e.labelWidth,inline:!1,model:e.form2}},[i("el-form-item",{attrs:{label:"标题",prop:"activity_name"}},[i("el-input",{attrs:{placeholder:"标题"},model:{value:e.form2.activity_name,callback:function(t){e.$set(e.form2,"activity_name",t)},expression:"form2.activity_name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"标签",prop:"activity_label"}},[i("el-input",{attrs:{placeholder:"标签"},model:{value:e.form2.activity_label,callback:function(t){e.$set(e.form2,"activity_label",t)},expression:"form2.activity_label"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"摘要",prop:"activity_abstract"}},[i("el-input",{attrs:{placeholder:"摘要"},model:{value:e.form2.activity_abstract,callback:function(t){e.$set(e.form2,"activity_abstract",t)},expression:"form2.activity_abstract"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"缩略图",prop:"activity_img"}},[i("el-upload",{attrs:{action:e.form2.doUpload,"list-type":"picture-card",accept:"image/*",name:"picture",headers:e.headers,limit:e.form2.imgLimit,"file-list":e.form2.productImgs,multiple:e.form2.isMultiple,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-exceed":e.handleExceed,"on-error":e.imgUploadError}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.form2.dialogVisible},on:{"update:visible":function(t){e.$set(e.form2,"dialogVisible",t)}}},[i("img",{attrs:{width:"100%",src:e.form2.dialogImageUrl,alt:""}})])],1),e._v(" "),i("el-form-item",{attrs:{label:"多图",prop:"img"}},[i("el-upload",{attrs:{action:e.form2.doUploadmore,"list-type":"picture-card",accept:"image/*",name:"picture",headers:e.headers,limit:e.form2.imgLimit2,"file-list":e.form2.productImgs2,multiple:e.form2.isMultiple2,"on-preview":e.handlePictureCardPreview2,"on-remove":e.handleRemove2,"on-success":e.handleAvatarSuccess2,"before-upload":e.beforeAvatarUpload2,"on-exceed":e.handleExceed,"on-error":e.imgUploadError2}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.form2.dialogVisible},on:{"update:visible":function(t){e.$set(e.form2,"dialogVisible",t)}}},[i("img",{attrs:{width:"100%",src:e.form2.dialogImageUrl,alt:""}})])],1),e._v(" "),i("div",{staticClass:"box-container"},[i("Ueditor",{ref:"ue",staticStyle:{width:"100%"},attrs:{value:e.defaultMSG,ueditorConfig:e.config},on:{ready:e.editorReady}})],1),e._v(" "),i("el-form-item",{attrs:{label:" "}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form2")}}},[e._v("立即创建")])],1)],1)],1)])},staticRenderFns:[]};t.a=o},hLkT:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l(i("woOf")),r=l(i("qzrg")),a=l(i("Eo2C"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={name:"searchinput",data:function(){return{name:localStorage.getItem("name"),form2:{activity_name:"",activity_label:"",activity_abstract:"",activity_detail:"",activity_img:"",img:[],doUpload:"http://web.newwynnhotel.com/admin/classes/picture_add",doUploadmore:"http://web.newwynnhotel.com/admin/classes/picture_add",dialogImageUrl:"",dialogVisible:!1,productImgs:[],isMultiple:!0,imgLimit:1,imgLimit2:6,productImgs2:[],isMultiple2:!0},form:{content:""},config:{initialFrameHeight:500},defaultMSG:null,editor:null,EditorObj:"",labelPosition:"right",labelWidth:"80px",rules:{user_tel:[{required:!0,message:"请填写手机",trigger:"change"}],product_id:[{type:"array",required:!0,message:"请至少选择一个产品",trigger:"change"}],number:[{required:!0,message:"请填写数量",trigger:"change"}]}}},computed:{headers:function(){return{Authorization:localStorage.getItem("Authorization")}}},components:{Ueditor:a.default},methods:{editorReady:function(e){var t=this;e.setContent(this.form.content),e.addListener("contentChange",function(){t.form2.activity_detail=e.getContent()})},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){console.log(e),this.dialogImageUrl=e.url,this.dialogVisible=!0},beforeAvatarUpload:function(e){console.log(e);var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t},handleAvatarSuccess:function(e,t){console.log(e),console.log(t),this.form2.activity_img=e,this.imageUrl=URL.createObjectURL(t.raw)},handleExceed:function(e,t){this.$message.error("上传图片不能超过1张!"),console.log(file,t)},imgUploadError:function(e,t,i){console.log(e),this.$message.error("上传图片失败!")},handleRemove2:function(e,t){console.log(e,t)},handlePictureCardPreview2:function(e){console.log(e),this.dialogImageUrl=e.url,this.dialogVisible=!0},beforeAvatarUpload2:function(e){console.log(e);var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t},handleAvatarSuccess2:function(e,t){console.log(e),console.log(t),this.form2.img.push(e),this.imageUrl=URL.createObjectURL(t.raw)},handleExceed2:function(e,t){this.$message.error("上传图片不能超过6张!"),console.log(file,t)},imgUploadError2:function(e,t,i){console.log(e),this.$message.error("上传图片失败!")},submitForm:function(e){var t=this;this.$refs.form02.validate(function(e){if(!e)return console.log("error submit!!"),!1;var i=(0,o.default)({},t.form2);r.default.msgApi.activityAdd(i).then(function(e){if(console.log(e),e&&e.data){var i=e.data;if(i&&1e3==i.error_code)t.$message({message:i.msg,type:"success"});else if(i&&0==i.error_code)return t.$message({message:"执行成功",type:"success"}),t.$router.push({path:"/activity_list"}),void(t.dialogEdittVisible=!1)}t.$message({message:"执行失败，请重试",type:"error"})}).catch(function(e){t.$message({message:"执行失败，请重试",type:"error"}),console.log(e)})})}}}},sAeX:function(e,t){}});