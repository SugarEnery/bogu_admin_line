webpackJsonp([13],{JMym:function(e,t){},Yoj5:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container messageboard"},[a("el-form",{ref:"formSearch",staticClass:"demo-form-inline",attrs:{"label-position":e.labelPosition,"label-width":e.labelWidth,inline:!0,model:e.formSearch}},[a("el-form-item",{attrs:{label:"账号名称",prop:"admin_name"}},[a("el-input",{attrs:{placeholder:"请输入账号名称"},model:{value:e.formSearch.admin_name,callback:function(t){e.$set(e.formSearch,"admin_name",t)},expression:"formSearch.admin_name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"50px"},attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"warning",plain:""},on:{click:e.onReset}},[e._v("重置")])],1)],1),e._v(" "),a("el-row",{staticClass:"mgb15"}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"admin_id",label:"账号id",width:"100",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{color:"#00D1B2"},attrs:{href:"javacript:;"},on:{click:function(a){e.openDetail(t.row)}}},[e._v(e._s(t.row.admin_id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"admin_name",label:"账号名称",align:"center",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"admin_status",label:"账号状态",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{color:"#00D1B2"},attrs:{href:"#"},on:{click:function(a){e.accountEdit(t.row)}}},[a("el-button",{attrs:{size:"mini"}},[e._v("修改")])],1),e._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,sizes,prev, pager, next,jumper","current-page":e.pageInfo.page,"page-size":e.pageInfo.pageSize,total:e.pageInfo.pageTotal,"page-sizes":[20]},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.formEditTitle,visible:e.dialogEdittVisible,width:"700px"},on:{"update:visible":function(t){e.dialogEdittVisible=t},close:function(t){e.closeDialog("formEdit")}}},[a("el-form",{ref:"formEdit",staticClass:"demo-form-inline",attrs:{"label-position":e.labelPosition,"label-width":e.labelWidth,rules:e.rulesEdit,disabled:e.formEditDisabled,inline:!0,model:e.formEdit}},[a("el-form-item",{attrs:{label:"账号id",prop:"admin_id"}},[a("el-input",{attrs:{placeholder:"账号id",disabled:""},model:{value:e.formEdit.admin_id,callback:function(t){e.$set(e.formEdit,"admin_id",t)},expression:"formEdit.admin_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录账号",prop:"admin_name"}},[a("el-input",{attrs:{placeholder:"账号名称"},model:{value:e.formEdit.admin_name,callback:function(t){e.$set(e.formEdit,"admin_name",t)},expression:"formEdit.admin_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"admin_names"}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.formEdit.admin_names,callback:function(t){e.$set(e.formEdit,"admin_names",t)},expression:"formEdit.admin_names"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生成密码"}},[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.passWord()}}},[e._v("点击")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"admin_password"}},[a("el-input",{attrs:{placeholder:"密码"},model:{value:e.formEdit.admin_password,callback:function(t){e.$set(e.formEdit,"admin_password",t)},expression:"formEdit.admin_password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属部门",prop:"depart_id"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.formEdit.depart_id,callback:function(t){e.$set(e.formEdit,"depart_id",t)},expression:"formEdit.depart_id"}},e._l(e.depart_info,function(t){return a("el-option",{key:t.id,attrs:{lable:t.depart_name,value:t.id}},[e._v("\n                  "+e._s(t.depart_name)+"\n                  ")])}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEdittVisible=!1}}},[e._v("取 消")]),e._v(" "),e.formEditDisabled?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};t.a=i},emJC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("kccN"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var s=a("Yoj5");var r=function(e){a("JMym")},l=a("VU/8")(n.a,s.a,!1,r,null,null);t.default=l.exports},kccN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(a("woOf")),n=o(a("qzrg"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:"messageboard",data:function(){return{listLoading:!1,pageInfo:{page:1,pageSize:20,pageTotal:80},formSearch:{admin_name:""},formEdit:{admin_id:"",admin_name:"",admin_password:"",admin_names:"",depart_id:""},depart_info:[],rulesEdit:{},formEditTitle:"编辑",formEditDisabled:!1,dialogEdittVisible:!1,dialogType:"",tableData:[],labelPosition:"right",labelWidth:"80px",formLabelWidth:"120px",multipleSelection:[]}},mounted:function(){this.selectRoleList(),this.onSearch();returnCitySN.cip,returnCitySN.cname},methods:{passWord:function(){var e=this;n.default.msgApi.passWord().then(function(t){if(console.log(t),t&&t.data){if(t&&200==t.status)return e.$message({message:"执行成功",type:"success"}),void(e.formEdit.admin_password=t.data)}}).catch(function(t){e.$message({message:"执行失败，请重试",type:"error"}),console.log(t)})},selectRoleList:function(){var e=this;n.default.msgApi.departList().then(function(t){if(t&&t.data&&(t.data&&200==t.status)){t.data;e.depart_info=t.data}}).catch(function(t){e.$message({message:"执行失败，请重试",type:"error"}),console.log(t)})},onSearch:function(){var e=this;this.listLoading=!0,this.formSearch.createtime&&(this.formSearch.startdate=this.formSearch.createtime[0],this.formSearch.enddate=this.formSearch.createtime[1]);var t=(0,i.default)({},this.formSearch,this.pageInfo),a=this;n.default.msgApi.accountList(t).then(function(t){if(e.listLoading=!1,t&&t.data){var i=t.data;console.log(t),1e3==t.data.error_code?e.$message({message:"权限不足！请联系管理员",type:"error"}):200==t.status?(a.pageInfo.pageTotal=t.data.total,a.tableData=i.data):i.message&&e.$message({message:i.message,type:"error"})}}).catch(function(t){e.listLoading=!1,e.$message({message:"查询异常，请重试",type:"error"}),console.log(t)})},handleSave:function(){"add"==this.dialogType?this.save():"edit"==this.dialogType?this.update():this.$message({message:"操作异常",type:"error"})},save:function(){var e=this;this.$refs.formEdit.validate(function(t){if(t){var a=(0,i.default)({},e.formEdit);n.default.msgApi.userAdd(a).then(function(t){if(t&&t.data&&(t.data&&200==t.status))return e.$message({message:"执行成功",type:"success"}),e.dialogEdittVisible=!1,void e.onSearch();e.$message({message:"执行失败，请重试",type:"error"})}).catch(function(t){e.$message({message:"执行失败，请重试",type:"error"})})}})},update:function(){var e=this;this.$refs.formEdit.validate(function(t){if(t){var a=(0,i.default)({},e.formEdit);n.default.msgApi.accountEdit(a).then(function(t){if((console.log(t),t&&t.data)&&(t.data&&200==t.status))return e.$message({message:"执行成功",type:"success"}),e.dialogEdittVisible=!1,void e.onSearch();e.$message({message:"执行失败，请重试",type:"error"})}).catch(function(e){console.log(e)})}})},handleDelete:function(e,t){var a=this;if("使用文档"!=t.name){var i=t.admin_id;console.log(i),this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.default.msgApi.accountDelete({admin_id:i}).then(function(e){1e3==e.data.error_code?a.$message({message:"权限不足！",type:"error"}):(a.$message({message:"执行成功",type:"success"}),a.onSearch())}).catch(function(e){console.log(e),a.$message({message:"执行失败，请重试",type:"error"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}else this.$message("使用文档不可删除")},deleteMany:function(){var e=this,t=this.multipleSelection.map(function(e){return e.id});0!=t.length?this.$confirm("此操作将批量永久删除文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.default.msgApi.deleteBatch({ids:t}).then(function(t){e.$common.isSuccess(t,function(){e.onSearch()})}).catch(function(t){e.$message({message:"执行失败，请重试",type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请选择要删除的项",type:"warn"})},onReset:function(){this.$refs.formSearch.resetFields(),this.onSearch()},handleAdd:function(){var e=this;this.dialogEdittVisible=!0,this.$nextTick(function(){e.dialogType="add",e.formEditTitle="新增",e.formEditDisabled=!1})},handleEdit:function(e,t){var a=this;this.dialogEdittVisible=!0;var o=t.admin_id;n.default.msgApi.accountDetail({admin_id:o}).then(function(e){console.log(e.data),console.log(a.formEdit),a.formEdit.admin_name=e.data.admin_name,a.formEdit.admin_names=e.data.admin_names,a.formEdit.depart_id=e.data.depart_id}).catch(function(e){a.listLoading=!1,a.$message({message:"查询异常，请重试",type:"error"}),console.log(e)}),this.dialogEdittVisible=!0,this.$nextTick(function(){a.dialogType="edit",a.formEditTitle="编辑",a.formEditDisabled=!1,a.formEdit=(0,i.default)({},t),a.formEdit.gender+=""})},handleDetail:function(e,t){var a=this;this.dialogEdittVisible=!0,this.$nextTick(function(){a.dialogType="show",a.formEditTitle="详情",a.formEditDisabled=!0,a.formEdit=(0,i.default)({},t),a.formEdit.gender+=""})},closeDialog:function(e){this.$refs[e].resetFields()},handleSizeChange:function(e){this.pageInfo.pageSize=e,this.onSearch()},handleCurrentChange:function(e){this.pageInfo.page=e,this.onSearch()},handleSelectionChange:function(e){this.multipleSelection=e},openDetail:function(e){this.$common.accountDetail(this,"detail",e)},accountEdit:function(e){this.$router.push({name:"account_edit",query:e})}}}}});