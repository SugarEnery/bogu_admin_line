webpackJsonp([41],{"9gpw":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(a("woOf")),s=o(a("qzrg"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"shop_list",data:function(){return{listLoading:!1,pageInfo:{page:1,pageSize:20,pageTotal:80},formSearch:{},formEdit:{id:"",shares_status:"",name:""},rulesEdit:{},formEditTitle:"编辑",formEditDisabled:!1,dialogEdittVisible:!1,dialogType:"",tableData:[],labelPosition:"right",labelWidth:"80px",formLabelWidth:"120px",multipleSelection:[]}},mounted:function(){this.onSearch();returnCitySN.cip,returnCitySN.cname},methods:{onSearch:function(){var t=this;this.listLoading=!0,this.formSearch.createtime&&(this.formSearch.startdate=this.formSearch.createtime[0],this.formSearch.enddate=this.formSearch.createtime[1]);(0,i.default)({},this.formSearch,this.pageInfo);var e=this;s.default.msgApi.attraList().then(function(a){if(console.log(a.data),t.listLoading=!1,a&&a.data){var i=a.data.data;200==a.status?(t.pageInfo.pageTotal=a.data.total,e.tableData=i):i.message&&t.$message({message:i.message,type:"error"})}}).catch(function(e){t.listLoading=!1,t.$message({message:"查询异常，请重试",type:"error"})})},handleSave:function(){"add"==this.dialogType?this.save():"edit"==this.dialogType?this.update():this.$message({message:"操作异常",type:"error"})},save:function(){var t=this;this.$refs.formEdit.validate(function(e){if(e){var a=(0,i.default)({},t.formEdit);s.default.msgApi.userAdd(a).then(function(e){if(e&&e.data&&(e.data&&200==e.status))return t.$message({message:"执行成功",type:"success"}),t.dialogEdittVisible=!1,void t.onSearch();t.$message({message:"执行失败，请重试",type:"error"})}).catch(function(e){t.$message({message:"执行失败，请重试",type:"error"})})}})},update:function(){var t=this;this.$refs.formEdit.validate(function(e){if(e){var a=(0,i.default)({},t.formEdit);s.default.msgApi.stockState(a).then(function(e){if((console.log(e),e&&e.data)&&(e.data&&200==e.status))return t.$message({message:"执行成功",type:"success"}),t.dialogEdittVisible=!1,void t.onSearch();t.$message({message:"执行失败，请重试",type:"error"})}).catch(function(t){console.log(t)})}})},handleDelete:function(t,e){var a=this;if("使用文档"!=e.name){var i=e.spots_id;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.default.msgApi.attraDelete({spots_id:i}).then(function(t){console.log(t),1e3==t.data.error_code?a.$message({message:"权限不足！",type:"error"}):(a.$message({message:"执行成功",type:"success"}),a.onSearch())}).catch(function(t){a.$message({message:"执行失败，请重试",type:"error"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}else this.$message("使用文档不可删除")},deleteMany:function(){var t=this,e=this.multipleSelection.map(function(t){return t.id});0!=e.length?this.$confirm("此操作将批量永久删除文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.default.msgApi.deleteBatch({ids:e}).then(function(e){t.$common.isSuccess(e,function(){t.onSearch()})}).catch(function(e){t.$message({message:"执行失败，请重试",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})}):this.$message({message:"请选择要删除的项",type:"warn"})},onReset:function(){this.$refs.formSearch.resetFields(),this.onSearch()},handleAdd:function(){var t=this;this.dialogEdittVisible=!0,this.$nextTick(function(){t.dialogType="add",t.formEditTitle="新增",t.formEditDisabled=!1})},handleEdit:function(t,e){var a=this;this.dialogEdittVisible=!0,this.$nextTick(function(){a.dialogType="edit",a.formEditTitle="编辑",a.formEditDisabled=!1,a.formEdit=(0,i.default)({},e),a.formEdit.gender+=""})},handleDetail:function(t,e){var a=this;this.dialogEdittVisible=!0,this.$nextTick(function(){a.dialogType="show",a.formEditTitle="详情",a.formEditDisabled=!0,a.formEdit=(0,i.default)({},e),a.formEdit.gender+=""})},closeDialog:function(t){this.$refs[t].resetFields()},handleSizeChange:function(t){this.pageInfo.pageSize=t,this.onSearch()},handleCurrentChange:function(t){this.pageInfo.page=t,this.onSearch()},handleSelectionChange:function(t){this.multipleSelection=t},messageEdit:function(t){this.$router.push({name:"attra_edit",query:t})}}}},CIwQ:function(t,e){},L8HH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("9gpw"),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);var n=a("y2CF");var l=function(t){a("CIwQ")},r=a("VU/8")(s.a,n.a,!1,l,null,null);e.default=r.exports},y2CF:function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container shop_list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"tableBox",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","header-cell-style":{color:"#323232","font-weight":"bold"}},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"spots_id",label:"id",width:"100",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"spots_abstract",label:"文章摘要",align:"center",width:"100",height:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"spots_title",label:"标题",align:"center",width:"200",height:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"spots_source",label:"来源",align:"center",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"spots_img",label:"缩略图",align:"center",width:"100",height:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.spots_img,"min-width":"100"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"spots_detail",label:"详情",align:"center",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"spots_type",label:"类型",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.spots_type?a("font",[t._v("网红景点")]):2===e.row.spots_type?a("font",[t._v("海边景点")]):3===e.row.spots_type?a("font",[t._v("森林景点")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"spots_addtime",label:"创建日期",formatter:this.$common.spots_addtime,width:"180",sortable:"",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticStyle:{color:"#00D1B2"},attrs:{href:"#"},on:{click:function(a){t.messageEdit(e.row)}}},[a("el-button",{attrs:{size:"mini"}},[t._v("编辑")])],1),t._v(" "),a("el-button",{attrs:{size:"mini",plain:"",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"total,sizes,prev, pager, next,jumper","current-page":t.pageInfo.page,"page-size":t.pageInfo.pageSize,total:t.pageInfo.pageTotal,"page-sizes":[5,10,20,50]},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:t.formEditTitle,visible:t.dialogEdittVisible,width:"700px"},on:{"update:visible":function(e){t.dialogEdittVisible=e},close:function(e){t.closeDialog("formEdit")}}},[a("el-form",{ref:"formEdit",staticClass:"demo-form-inline",attrs:{"label-position":t.labelPosition,"label-width":t.labelWidth,rules:t.rulesEdit,disabled:t.formEditDisabled,inline:!0,model:t.formEdit}},[a("el-form-item",{attrs:{label:"消息id",prop:"id"}},[a("el-input",{attrs:{placeholder:"分享",disabled:""},model:{value:t.formEdit.id,callback:function(e){t.$set(t.formEdit,"id",e)},expression:"formEdit.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"股票状态",prop:"shares_status"}},[a("el-select",{attrs:{placeholder:"是否股票"},model:{value:t.formEdit.shares_status,callback:function(e){t.$set(t.formEdit,"shares_status",e)},expression:"formEdit.shares_status"}},[a("el-option",{attrs:{label:"持股",value:0}}),t._v(" "),a("el-option",{attrs:{label:"获利",value:1}}),t._v(" "),a("el-option",{attrs:{label:"止损",value:2}}),t._v(" "),a("el-option",{attrs:{label:"调仓",value:3}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogEdittVisible=!1}}},[t._v("取 消")]),t._v(" "),t.formEditDisabled?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};e.a=i}});