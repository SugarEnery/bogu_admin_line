webpackJsonp([20],{"2KIv":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=t("QkAy"),s=t.n(i);for(var r in i)"default"!==r&&function(e){t.d(o,e,function(){return i[e]})}(r);var n=t("v558");var a=function(e){t("MQAf")},l=t("VU/8")(s.a,n.a,!1,a,null,null);o.default=l.exports},MQAf:function(e,o){},QkAy:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=n(t("woOf")),s=n(t("qzrg")),r=n(t("Eo2C"));function n(e){return e&&e.__esModule?e:{default:e}}o.default={name:"searchinput",data:function(){return{personInfo:this.$route.query,form2:{shopping_id:"",shopping_name:"",shopping_source:"",shopping_abstract:"",shopping_detail:"",is_hot:"",shopping_img:"",doUpload:"http://web.newwynnhotel.com/admin/classes/picture_add",dialogImageUrl:"",dialogVisible:!1,productImgs:[],isMultiple:!0,imgLimit:1},form:{content:""},config:{initialFrameHeight:500},defaultMSG:null,editor:null,EditorObj:"",labelPosition:"right",labelWidth:"80px",rules:{}}},computed:{headers:function(){return{Authorization:localStorage.getItem("Authorization")}}},mounted:function(){this.getParams()},components:{Ueditor:r.default},methods:{getParams:function(){var e=this.personInfo;console.log(e),this.form2.shopping_id=this.personInfo.shopping_id,this.form2.is_hot=this.personInfo.is_hot,this.form2.shopping_name=this.personInfo.shopping_name,this.form2.shopping_source=this.personInfo.shopping_source,this.form2.shopping_abstract=this.personInfo.shopping_abstract,this.form.content=this.personInfo.shopping_detail,this.form2.shopping_detail=this.personInfo.shopping_detail,this.form.dialogImageUrl=this.personInfo.shopping_img,this.form2.shopping_img=this.personInfo.shopping_img},editorReady:function(e){var o=this;e.setContent(this.form.content),e.addListener("contentChange",function(){o.form2.shopping_detail=e.getContent()})},handleRemove:function(e,o){console.log(e,o)},handlePictureCardPreview:function(e){console.log(e),this.dialogImageUrl=e.url,this.dialogVisible=!0},beforeAvatarUpload:function(e){console.log(e);var o=e.size/1024/1024<2;return o||this.$message.error("上传图片大小不能超过 2MB!"),o},handleAvatarSuccess:function(e,o){console.log(e),console.log(o),this.form2.news_img=e,this.imageUrl=URL.createObjectURL(o.raw)},handleExceed:function(e,o){this.$message.error("上传图片不能超过6张!"),console.log(file,o)},imgUploadError:function(e,o,t){console.log(e),this.$message.error("上传图片失败!")},submitForm:function(e){var o=this;this.$refs.form02.validate(function(e){if(!e)return console.log("error submit!!"),!1;var t=(0,i.default)({},o.form2);s.default.msgApi.shoppingEdit(t).then(function(e){if(console.log(e),e&&e.data){var t=e.data;if(t&&1e3==t.error_code)o.$message({message:t.msg,type:"success"});else if(t&&0==t.error_code)return o.$message({message:"执行成功",type:"success"}),o.$router.push({path:"/news_list"}),void(o.dialogEdittVisible=!1)}o.$message({message:"执行失败，请重试",type:"error"})}).catch(function(e){o.$message({message:"执行失败，请重试",type:"error"}),console.log(e)})})}}}},v558:function(e,o,t){"use strict";var i={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("div",{staticClass:"container form02"},[t("el-form",{ref:"form02",staticClass:"demo-form-inline",attrs:{"label-position":e.labelPosition,rules:e.rules,"label-width":e.labelWidth,inline:!1,model:e.form2}},[t("el-form-item",{attrs:{label:"是否热门",prop:"is_hot"}},[t("el-select",{attrs:{placeholder:"选择类型"},model:{value:e.form2.is_hot,callback:function(o){e.$set(e.form2,"is_hot",o)},expression:"form2.is_hot"}},[t("el-option",{attrs:{label:"否",value:"-1"}}),e._v(" "),t("el-option",{attrs:{label:"是",value:"1"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"标题",prop:"shopping_name"}},[t("el-input",{attrs:{placeholder:"标题"},model:{value:e.form2.shopping_name,callback:function(o){e.$set(e.form2,"shopping_name",o)},expression:"form2.shopping_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"来源",prop:"shopping_source"}},[t("el-input",{attrs:{placeholder:"来源"},model:{value:e.form2.shopping_source,callback:function(o){e.$set(e.form2,"shopping_source",o)},expression:"form2.shopping_source"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"摘要",prop:"shopping_abstract"}},[t("el-input",{attrs:{placeholder:"摘要"},model:{value:e.form2.shopping_abstract,callback:function(o){e.$set(e.form2,"shopping_abstract",o)},expression:"form2.shopping_abstract"}})],1),e._v(" "),t("el-form-item",[t("el-upload",{attrs:{action:e.form2.doUpload,"list-type":"picture-card",accept:"image/*",name:"picture",headers:e.headers,limit:e.form2.imgLimit,"file-list":e.form2.productImgs,multiple:e.form2.isMultiple,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-exceed":e.handleExceed,"on-error":e.imgUploadError}},[t("i",{staticClass:"el-icon-plus"})]),e._v(" "),t("el-dialog",{attrs:{visible:e.form2.dialogVisible},on:{"update:visible":function(o){e.$set(e.form2,"dialogVisible",o)}}},[t("img",{attrs:{width:"100%",src:e.form2.dialogImageUrl,alt:""}})])],1),e._v(" "),t("el-form-item",{attrs:{label:"封面图",prop:"shopping_img"}},[t("el-input",{attrs:{placeholder:"封面图"},model:{value:e.form2.shopping_img,callback:function(o){e.$set(e.form2,"shopping_img",o)},expression:"form2.shopping_img"}})],1),e._v(" "),t("div",{staticClass:"box-container"},[t("Ueditor",{ref:"ue",staticStyle:{width:"100%"},attrs:{value:e.defaultMSG,ueditorConfig:e.config},on:{ready:e.editorReady}})],1),e._v(" "),t("el-form-item",{attrs:{label:" "}},[t("el-button",{attrs:{type:"primary"},on:{click:function(o){e.submitForm("form2")}}},[e._v("立即创建")])],1)],1)],1)])},staticRenderFns:[]};o.a=i}});